# Railway Configuration File
# https://docs.railway.app/deploy/config-as-code

[build]
# Use Nixpacks builder (default for Next.js)
builder = "NIXPACKS"

# Custom build command (optional, Nixpacks auto-detects)
buildCommand = "yarn install && yarn build"

# Watch patterns for rebuilds
watchPatterns = [
  "**/*.ts",
  "**/*.tsx",
  "**/*.js",
  "**/*.jsx",
  "package.json",
  "yarn.lock"
]

[deploy]
# Start command for production
startCommand = "yarn start"

# Port configuration (Railway sets this automatically)
# Your app should listen on $PORT environment variable
numReplicas = 1

# Restart policy
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Health check configuration
healthcheckPath = "/"
healthcheckTimeout = 100

[env]
# Environment variables template
# Set actual values in Railway dashboard
# NEXT_PUBLIC_SUPABASE_URL = "https://your-project.supabase.co"
# NEXT_PUBLIC_SUPABASE_ANON_KEY = "your-anon-key"
# NEXT_PUBLIC_SITE_URL = "${{RAILWAY_PUBLIC_DOMAIN}}"

# Node.js configuration
NODE_ENV = "production"
NEXT_TELEMETRY_DISABLED = "1"
